<div align="center">

<h1 align="center">üõí E-commerce API</h1>

<p align="center">
  <strong>O back-end completo para uma plataforma de E-commerce, constru√≠do com Java e Spring Boot.</strong>
</p>

<p align="center">
  <a href="#-sobre-o-projeto">Sobre</a> ‚Ä¢
  <a href="#-features">Features</a> ‚Ä¢
  <a href="#-tecnologias">Tecnologias</a> ‚Ä¢
  <a href="#-pr√©-requisitos">Pr√©-requisitos</a> ‚Ä¢
  <a href="#-como-executar">Execu√ß√£o</a> ‚Ä¢
  <a href="#-documenta√ß√£o-da-api">API Endpoints</a> ‚Ä¢
  <a href="#-modelagem-de-dados">Modelagem</a>
</p>

<p align="center">
    <img src="https://img.shields.io/badge/Java-21-blue?logo=java&logoColor=white" alt="Java 21">
    <img src="https://img.shields.io/badge/Spring_Boot-3.x-brightgreen?logo=spring-boot&logoColor=white" alt="Spring Boot 3.x">
    <img src="https://img.shields.io/badge/Spring_Security-6.x-blue?logo=spring-security&logoColor=white" alt="Spring Security 6.x">
    <img src="https://img.shields.io/badge/JPA_/_Hibernate-Data-orange?logo=hibernate&logoColor=white" alt="JPA / Hibernate">
    <img src="https://img.shields.io/badge/JWT-Authentication-purple?logo=json-web-tokens&logoColor=white" alt="JWT">
    <img src="https://img.shields.io/badge/MySQL-Database-blue?logo=mysql&logoColor=white" alt="MySQL">
</p>

</div>

---

## üéØ Sobre o Projeto

A **E-commerce API** √© a espinha dorsal de uma loja virtual moderna. Este projeto implementa toda a l√≥gica de neg√≥cio necess√°ria para gerenciar produtos, clientes, carrinho de compras e o fluxo de pedidos. A arquitetura foi pensada para ser segura, escal√°vel e capaz de traduzir requisitos complexos do mundo real em c√≥digo funcional e de alta qualidade.

O objetivo foi criar um sistema que n√£o apenas funcionasse, mas que fosse constru√≠do sobre uma base s√≥lida de boas pr√°ticas de desenvolvimento, seguran√ßa e modelagem de dados relacional.

---

## ‚ú® Features

-   üîê **Sistema de Autentica√ß√£o Completo**:
    -   Registro de clientes e administradores com perfis distintos.
    -   Autentica√ß√£o segura via **JWT (JSON Web Token)**.
    -   Senhas criptografadas com Bcrypt.

-   üì¶ **Gerenciamento de Produtos (Cat√°logo)**:
    -   CRUD completo para produtos, acess√≠vel apenas para administradores (`ADMIN`).
    -   Endpoints p√∫blicos para listagem e busca de produtos.

-   üõí **Funcionalidade de Carrinho de Compras**:
    -   Adicionar produtos ao carrinho.
    -   Se o produto j√° existe no carrinho, a quantidade √© incrementada.
    -   O carrinho √© persistente e vinculado ao usu√°rio logado.

-   üõçÔ∏è **Fluxo de Pedidos (Checkout)**:
    -   Cria√ß√£o de um novo pedido a partir dos itens do carrinho.
    -   **Atualiza√ß√£o de estoque** em tempo real ap√≥s a finaliza√ß√£o da compra.
    -   O carrinho √© esvaziado ap√≥s o checkout.
    -   Acesso ao hist√≥rico de pedidos por usu√°rio.

-   üõ°Ô∏è **Controle de Acesso Baseado em Pap√©is (Roles)**:
    -   **Clientes (`USER`)**: Podem gerenciar seus dados, carrinho e pedidos.
    -   **Administradores (`ADMIN`)**: T√™m acesso total ao gerenciamento de produtos.

---

## üõ†Ô∏è Tecnologias

O projeto foi constru√≠do utilizando as seguintes tecnologias:

| Tecnologia         | Descri√ß√£o                                         |
| ------------------ | --------------------------------------------------- |
| **Java 21** | Vers√£o LTS do Java, garantindo robustez e performance.                  |
| **Spring Boot** | Framework principal para agilizar o desenvolvimento.      |
| **Spring Security**| Implementa√ß√£o da autentica√ß√£o e autoriza√ß√£o por roles.      |
| **Spring Data JPA**| Camada de persist√™ncia para abstrair o acesso ao banco.                    |
| **Hibernate** | Implementa√ß√£o ORM para mapear objetos Java a tabelas.               |
| **MySQL** | Banco de dados relacional escolhido pela sua popularidade e confiabilidade.               |
| **Maven** | Gerenciamento de depend√™ncias e build do projeto.   |
| **JWT** | Gera√ß√£o e valida√ß√£o de tokens para stateless authentication.          |
| **Lombok** | Redu√ß√£o de c√≥digo boilerplate em models e DTOs.     |

---

## üìã Pr√©-requisitos

Antes de come√ßar, voc√™ precisar√° ter as seguintes ferramentas instaladas em sua m√°quina:
-   [**JDK 21**](https://www.oracle.com/java/technologies/downloads/#java21) ou superior.
-   [**Apache Maven**](https://maven.apache.org/download.cgi) 3.5 ou superior.
-   [**MySQL Server**](https://dev.mysql.com/downloads/mysql/) instalado e em execu√ß√£o.
-   Uma IDE de sua prefer√™ncia (ex: **IntelliJ IDEA**, **VS Code**).
-   Um cliente de API, como o **[Postman](https://www.postman.com/downloads/)** ou **[DBeaver](https://dbeaver.io/)**.

---

## üöÄ Como Executar

1.  **Clone o reposit√≥rio:**
    ```bash
    git clone <url-do-seu-repositorio-ecommerce>
    cd ecommerce
    ```

2.  **Configura√ß√£o do Banco de Dados:**
    -   Abra o arquivo `src/main/resources/application.properties`.
    -   Altere as propriedades `spring.datasource.username` e `spring.datasource.password` com suas credenciais do MySQL.
    ```properties
    spring.datasource.url=jdbc:mysql://localhost:3306/ecommerce_db?createDatabaseIfNotExist=true
    spring.datasource.username=seu_usuario_mysql
    spring.datasource.password=sua_senha_mysql
    ```
    - A propriedade `createDatabaseIfNotExist=true` ir√° criar o banco de dados `ecommerce_db` para voc√™ na primeira execu√ß√£o.

3.  **Execute a aplica√ß√£o:**
    ```bash
    ./mvnw spring-boot:run
    ```

A API estar√° dispon√≠vel em `http://localhost:8080`.

---

## üìñ Documenta√ß√£o da API

A seguir est√£o detalhados os endpoints dispon√≠veis na API.

**URL Base**: `http://localhost:8080`

<details>
<summary><strong>üîë Autentica√ß√£o de Usu√°rios</strong></summary>

| M√©todo | Endpoint             | Descri√ß√£o                 | Acesso      |
|--------|----------------------|---------------------------|-------------|
| `POST` | `/auth/register`     | Registra um novo usu√°rio. | P√∫blico     |
| `POST` | `/auth/login`        | Autentica um usu√°rio e retorna um token JWT. | P√∫blico     |
</details>

<details>
<summary><strong>üì¶ Gerenciamento de Produtos</strong></summary>

| M√©todo | Endpoint             | Descri√ß√£o                 | Acesso      |
|--------|----------------------|---------------------------|-------------|
| `GET`  | `/products`          | Lista todos os produtos.  | P√∫blico     |
| `GET`  | `/products/{id}`     | Busca um produto por ID.  | P√∫blico     |
| `POST` | `/products`          | Cria um novo produto.     | `ADMIN`     |
| `PUT`  | `/products/{id}`     | Atualiza um produto.      | `ADMIN`     |
| `DELETE`| `/products/{id}`    | Deleta um produto.        | `ADMIN`     |
</details>

<details>
<summary><strong>üõí Carrinho de Compras</strong></summary>

| M√©todo | Endpoint             | Descri√ß√£o                 | Acesso      |
|--------|----------------------|---------------------------|-------------|
| `POST` | `/cart/add`          | Adiciona um item ao carrinho do usu√°rio logado. | `USER`      |
- **Corpo da Requisi√ß√£o (`/cart/add`):**
    ```json
    {
      "productId": 1,
      "quantity": 2
    }
    ```
- **Resposta de Sucesso:** Retorna o objeto do carrinho (`Cart`) atualizado.
</details>

<details>
<summary><strong>üõçÔ∏è Pedidos (Orders)</strong></summary>

| M√©todo | Endpoint             | Descri√ß√£o                 | Acesso      |
|--------|----------------------|---------------------------|-------------|
| `POST` | `/orders/checkout`   | Cria um pedido a partir do carrinho e o esvazia. | `USER`      |
| `GET`  | `/orders`            | Lista o hist√≥rico de pedidos do usu√°rio logado. | `USER`      |
- **Resposta de Sucesso (`/orders/checkout`):** Retorna o objeto do pedido (`Order`) rec√©m-criado.
</details>

---

## üóÇÔ∏è Modelagem de Dados

O Hibernate ir√° gerar o seguinte esquema de banco de dados com base nas entidades:

**Tabela `users`**
| Coluna | Tipo | Restri√ß√µes |
|---|---|---|
| `id` | `BIGINT` | Chave Prim√°ria |
| `email` | `VARCHAR(255)` | √önico, N√£o Nulo |
| `name` | `VARCHAR(255)` | |
| `password` | `VARCHAR(255)` | N√£o Nulo |
| `role` | `VARCHAR(255)` | `USER` ou `ADMIN` |

**Tabela `products`**
| Coluna | Tipo | Restri√ß√µes |
|---|---|---|
| `id` | `BIGINT` | Chave Prim√°ria |
| `name` | `VARCHAR(255)` | N√£o Nulo |
| `description` | `VARCHAR(255)` | |
| `price` | `DECIMAL(19,2)` | N√£o Nulo |
| `stock` | `INTEGER` | N√£o Nulo |

**Tabela `carts`**
| Coluna | Tipo | Restri√ß√µes |
|---|---|---|
| `id` | `BIGINT` | Chave Prim√°ria |
| `user_id` | `BIGINT` | Chave Estrangeira (users), √önico, N√£o Nulo |

**Tabela `cart_items`**
| Coluna | Tipo | Restri√ß√µes |
|---|---|---|
| `id` | `BIGINT` | Chave Prim√°ria |
| `quantity` | `INTEGER` | |
| `cart_id` | `BIGINT` | Chave Estrangeira (carts) |
| `product_id` | `BIGINT` | Chave Estrangeira (products) |

**Tabela `orders`**
| Coluna | Tipo | Restri√ß√µes |
|---|---|---|
| `id` | `BIGINT` | Chave Prim√°ria |
| `order_date` | `DATETIME(6)` | |
| `total_price` | `DECIMAL(19,2)` | |
| `user_id` | `BIGINT` | Chave Estrangeira (users) |

**Tabela `order_items`**
| Coluna | Tipo | Restri√ß√µes |
|---|---|---|
| `id` | `BIGINT` | Chave Prim√°ria |
| `price` | `DECIMAL(19,2)` | |
| `quantity` | `INTEGER` | |
| `order_id` | `BIGINT` | Chave Estrangeira (orders) |
| `product_id` | `BIGINT` | Chave Estrangeira (products) |

---

## üèóÔ∏è Estrutura do Projeto

O projeto segue uma arquitetura em camadas para garantir a separa√ß√£o de responsabilidades:

* **`com.example.ecommerce`**
    * `‚îî‚îÄ‚îÄ config`
        * `‚îú‚îÄ‚îÄ JwtAuthenticationFilter.java` (Intercepta requisi√ß√µes para validar o token JWT)
        * `‚îî‚îÄ‚îÄ SecurityConfig.java` (Define as regras de seguran√ßa da API)
    * `‚îî‚îÄ‚îÄ controller`
        * `‚îú‚îÄ‚îÄ AuthController.java` (Endpoints para registro e login)
        * `‚îî‚îÄ‚îÄ ProductController.java` (Endpoints para o CRUD de produtos)
        * `‚îî‚îÄ‚îÄ OrderController.java` (Endpoints para os pedidos)
        * `‚îî‚îÄ‚îÄ CartController.java` (Endpoints para a cria√ß√£o do carrinho
    * `‚îî‚îÄ‚îÄ dto`
        * `‚îú‚îÄ‚îÄ AuthRequest.java` (Dados para a requisi√ß√£o de login)
        * `‚îú‚îÄ‚îÄ AuthResponse.java` (Resposta com o token JWT)
        * `‚îî‚îÄ‚îÄ RegisterRequest.java` (Dados para a requisi√ß√£o de registro)
        * `‚îî‚îÄ‚îÄ AddItemRequest.java`(Dados para a requisi√ß√£o de adicionar item)
    * `‚îî‚îÄ‚îÄ model`
        * `‚îú‚îÄ‚îÄ Product.java` (Entidade que representa a tabela `products`)
        * `‚îú‚îÄ‚îÄ Role.java` (Enum para os pap√©is de usu√°rio: `USER`, `ADMIN`)
        * `‚îî‚îÄ‚îÄ User.java` (Entidade que representa a tabela `users`)
        * `‚îî‚îÄ‚îÄ Cart.java` (Entidade que representa a tebela `cart`)
        * `‚îî‚îÄ‚îÄ Order.java` (Entidade que representa a tebela `order`)
        * `‚îî‚îÄ‚îÄ OrderItem.java` (Entidade que representa a tebela `orderItem`)
        * `‚îî‚îÄ‚îÄ CartItem.java` (Entidade que representa a tebela `cartItem`)
    * `‚îî‚îÄ‚îÄ repository`
        * `‚îú‚îÄ‚îÄ ProductRepository.java` (Interface para acesso aos dados de produtos)
        * `‚îî‚îÄ‚îÄ UserRepository.java` (Interface para acesso aos dados de usu√°rios)
        * `‚îî‚îÄ‚îÄ CartRepository.java` (Interface para acesso aos dados do carrihno)
        * `‚îî‚îÄ‚îÄ CartItemRepository.java` (Interface para acesso aos dados de para os itens do carrinho)
        * `‚îî‚îÄ‚îÄ OrderRepository.java` (Interface para acesso aos dados de pedido)
        * `‚îî‚îÄ‚îÄ OrderItemRepository.java` (Interface para acesso aos dados dos itens de pedido)
    * `‚îî‚îÄ‚îÄ service`
        * `‚îú‚îÄ‚îÄ AuthService.java` (L√≥gica de neg√≥cio para autentica√ß√£o)
        * `‚îú‚îÄ‚îÄ JwtService.java` (L√≥gica para criar e validar tokens JWT)
        * `‚îú‚îÄ‚îÄ ProductService.java` (L√≥gica de neg√≥cio para o CRUD de produtos)
        * `‚îî‚îÄ‚îÄ UserDetailsServiceImpl.java` (Servi√ßo para o Spring Security carregar os usu√°rios)
        * `‚îî‚îÄ‚îÄ CartService.java` (L√≥gica de neg√≥cio para o funcionamento do carrinho)
        * `‚îî‚îÄ‚îÄ OrderService.java` (L√≥gica de neg√≥cio para o funcionamento dos pedidos)

---

## üë®‚Äçüíª Autor

Desenvolvido por **Thiago Andr√© Neves Miranda**.

-   [![LinkedIn](https://img.shields.io/badge/LinkedIn-0A66C2?style=for-the-badge&logo=linkedin&logoColor=white)](https://www.linkedin.com/in/tanm-dev/)
-   [![GitHub](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white)](https://github.com/ThiagoMiranda-m)

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa MIT.
     
